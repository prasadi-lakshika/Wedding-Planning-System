<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Client Management - Wedding Planning System</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>
  <header>
    <div class="navbar">
      <nav id="mainNav">
        <!-- Home link for logged-in users -->
        <a href="index.html" class="nav-link common-link" style="display:none;">Home</a>
        
        <!-- Common links for all logged-in users -->
        <a href="dashboard.html" class="nav-link common-link" style="display:none;">Dashboard</a>
        <a href="theme_suggestions.html" class="nav-link common-link" style="display:none;">Theme Suggestions</a>
        <a href="checklist.html" class="nav-link common-link" style="display:none;">Checklist</a>
        <a href="budget.html" class="nav-link common-link" style="display:none;">Budget</a>
        <a href="calendar.html" class="nav-link common-link" style="display:none;">Calendar</a>
        <a href="client_management.html" class="nav-link common-link active" style="display:none;">Client Management</a>
        
        <!-- Planner-only links -->
        <a href="my_account.html" class="nav-link planner-only-link" style="display:none;">My Account</a>
        
        <!-- Users section links -->
        <a href="profile.html" class="nav-link admin-only-link" style="display:none;">Profile</a>
        <a href="admin_dashboard.html" class="nav-link admin-only-link" style="display:none;">Users</a>
        
        <!-- Logout link (shown when logged in) -->
        <a href="#" id="logoutLink" class="nav-link logout-link" style="display:none;">Logout</a>
      </nav>
      <button class="login-btn" id="openLogin">Sign In / Log In</button>
    </div>
  </header>
  
  <main class="main-content client-management-page">
    <section class="page-header">
      <div>
        <h1>Client &amp; Project Management</h1>
        <p class="page-subtitle">Track every couple, assignment, and planning milestone in one place.</p>
      </div>
      <div class="header-meta">
        <span id="roleBadge" class="role-badge">Unknown role</span>
        <button id="newProjectBtn" class="primary-btn">
          <span aria-hidden="true">＋</span>
          <span>New Project</span>
        </button>
      </div>
    </section>

    <section class="client-management-grid">
      <div class="projects-panel">
        <div class="panel-header">
      <h2>Wedding Projects</h2>
          <span id="projectsCount" class="count-badge">0 projects</span>
        </div>
        <div id="projectsEmptyState" class="empty-state" hidden>
          <p>No projects found yet.</p>
          <p class="hint admin-hint">Use “New Project” to add a client when you’re ready.</p>
        </div>
        <div class="table-wrapper">
      <table id="clientTable">
        <thead>
          <tr>
                <th>Couple</th>
                <th>Wedding</th>
                <th>Contact</th>
                <th>Status</th>
                <th>Assigned</th>
                <th class="actions-col">Actions</th>
          </tr>
        </thead>
        <tbody id="clientTableBody">
          <!-- Projects will be listed here -->
        </tbody>
      </table>
        </div>
      </div>

      <div class="form-panel">
        <form class="client-form" id="clientForm" novalidate>
          <div class="form-header">
            <div>
              <h2 id="formTitle">Create New Project</h2>
              <p id="assignedDisplayBadge" class="assigned-badge" hidden></p>
            </div>
            <span id="formModeBadge" class="mode-badge">Admin Mode</span>
          </div>

          <div id="formMessage" class="form-message" role="alert" hidden></div>

          <div class="form-grid">
            <div class="form-group">
              <label for="brideName">Bride's Name</label>
              <input type="text" id="brideName" placeholder="Jane Doe" autocomplete="name" />
            </div>

            <div class="form-group">
              <label for="groomName">Groom's Name</label>
              <input type="text" id="groomName" placeholder="John Smith" autocomplete="name" />
            </div>

            <div class="form-group">
              <label for="contactNumber">Contact Number</label>
              <input type="tel" id="contactNumber" placeholder="0771234567" pattern="[0-9]{10}" title="Enter 10 digit phone number" />
            </div>

            <div class="form-group">
              <label for="contactEmail">Contact Email</label>
              <input type="email" id="contactEmail" placeholder="planner@example.com" autocomplete="email" />
            </div>

            <div class="form-group">
              <label for="projectWeddingDate">Wedding Date</label>
              <input type="date" id="projectWeddingDate" />
            </div>

            <div class="form-group">
              <label for="projectWeddingType">Wedding Type</label>
              <select id="projectWeddingType">
                <option value="">Select type...</option>
              </select>
            </div>

            <div class="form-group">
              <label for="projectStatus">Status</label>
              <select id="projectStatus">
                <option value="planning">Planning</option>
                <option value="confirmed">Confirmed</option>
                <option value="in_progress">In Progress</option>
                <option value="completed">Completed</option>
                <option value="cancelled">Cancelled</option>
              </select>
            </div>

            <div class="form-group">
              <label for="projectAssignee">Assigned Planner</label>
              <select id="projectAssignee">
                <option value="">Unassigned</option>
              </select>
            </div>

            <div class="form-group form-group--notes">
              <label for="projectNotes">Notes</label>
              <textarea id="projectNotes" rows="4" placeholder="Internal notes, preferences, reminders..."></textarea>
            </div>
          </div>

          <div class="form-actions">
            <button type="button" id="cancelEditBtn" class="secondary-btn">Cancel</button>
            <div class="action-group">
              <button type="button" id="deleteProjectBtn" class="danger-btn" hidden>Delete</button>
              <button type="submit" id="saveProjectBtn" class="primary-btn">Create Project</button>
            </div>
          </div>
        </form>
      </div>
    </section>
  </main>
  
  <footer>&copy; 2025 Wedding Planning System</footer>
  
  <!-- Modal Background -->
  <div class="modal-bg" id="modalBG"></div>
  <!-- Login Modal -->
  <div class="modal" id="loginModal">
    <span class="close-x" onclick="closeModal()">&times;</span>
    <h3 style="margin-top:2px;">Login to your account</h3>
    <form id="emailLoginForm">
      <input id="loginEmail" type="email" placeholder="Email" required>
      <input id="loginPassword" type="password" placeholder="Password" required>
      <button type="submit" class="login-btn" style="width:100%; margin-bottom:15px;">Login</button>
      <div id="loginMsg" style="color:red; font-size:0.98em; margin-bottom:9px;"></div>
    </form>
  </div>
  
  <!-- Load JavaScript files -->
  <script src="assets/js/login_modal.js"></script>
  <script src="assets/js/shared_navigation.js"></script>
  <script src="assets/js/client_management.js"></script>
  <script>
    // Initialize navigation using shared navigation system
    sharedNavigation.initializePageNavigation();
  </script>
</body>
</html>