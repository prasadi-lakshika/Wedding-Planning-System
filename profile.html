<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Profile - Wedding Planning System</title>
  <link rel="stylesheet" href="assets/css/styles.css" />
</style>
</head>
<body>
  <header>
    <div class="navbar">
      <nav id="mainNav">
        <a href="dashboard.html">Dashboard</a>
        <a href="theme_suggestions.html">Theme Suggestions</a>
        <a href="checklist.html">Checklist</a>
        <a href="budget.html">Budget</a>
        <a href="calendar.html">Calendar</a>
        <a href="client_management.html">Client Management</a>
        <a href="profile.html" id="profileNavLink">Profile</a>
      </nav>
      <button class="login-btn" id="openLogin">Sign In / Log In</button>
    </div>
  </header>
  <script src="assets/js/nav_visibility.js"></script>
  <script>
    // Role-based access control: only allow admin to access this page
    const userRole = localStorage.getItem('userRole');
    if (userRole !== 'admin') {
      alert('Access denied. This page is for admin users only.');
      window.location.href = 'dashboard.html';
    }
  </script>
  <main class="main-content">
    <form class="profile-form" id="profileForm">
      <h2>Edit Profile & Business Info</h2>
      <label for="companyName">Company Name</label>
      <input type="text" id="companyName" placeholder="Your Company Name" required />
      <label for="contactEmail">Contact Email</label>
      <input type="email" id="contactEmail" placeholder="Contact Email" required />
      <label for="phoneNumber">Phone Number</label>
      <input type="tel" id="phoneNumber" placeholder="Phone Number" />
      <label for="address">Address</label>
      <textarea id="address" rows="3" placeholder="Business Address"></textarea>
      <label for="teamMembers">Team Members (comma separated emails)</label>
      <input type="text" id="teamMembers" placeholder="team1@example.com, team2@example.com" />
      <button type="submit">Save Profile</button>
      <div id="profileMsg" style="color: green; font-weight: bold; margin-top: 10px;"></div>
    </form>
  </main>
  <footer>&copy; 2025 Wedding Planning System</footer>
  <script>
    const profileForm = document.getElementById('profileForm');
    const profileMsg = document.getElementById('profileMsg');

    // Load profile data from localStorage
    function loadProfile() {
      const profile = JSON.parse(localStorage.getItem('plannerProfile')) || {};
      document.getElementById('companyName').value = profile.companyName || '';
      document.getElementById('contactEmail').value = profile.contactEmail || '';
      document.getElementById('phoneNumber').value = profile.phoneNumber || '';
      document.getElementById('address').value = profile.address || '';
      document.getElementById('teamMembers').value = profile.teamMembers || '';
    }

    profileForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const companyName = document.getElementById('companyName').value.trim();
      const contactEmail = document.getElementById('contactEmail').value.trim();
      const phoneNumber = document.getElementById('phoneNumber').value.trim();
      const address = document.getElementById('address').value.trim();
      const teamMembers = document.getElementById('teamMembers').value.trim();

      if (!companyName || !contactEmail) {
        profileMsg.style.color = 'red';
        profileMsg.textContent = 'Company Name and Contact Email are required.';
        return;
      }

      const profile = { companyName, contactEmail, phoneNumber, address, teamMembers };
      localStorage.setItem('plannerProfile', JSON.stringify(profile));
      profileMsg.style.color = 'green';
      profileMsg.textContent = 'Profile saved successfully.';
    });

    loadProfile();
  </script>
  <script src="assets/js/login_modal.js"></script>
</body>
</html>
